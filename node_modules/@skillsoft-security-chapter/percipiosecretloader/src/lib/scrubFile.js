const fs = require('fs');
const enginesFinder = require('./engines.js');

async function parseAndReplace(stringContent, engine) {
  const regex = await enginesFinder.getEngineRegex(engine);

  let result = stringContent;
  let m;

  while ((m = regex.exec(result)) !== null) {
    const all = m[0];
    result = result.replace(all, 'MUST_OVERRIDE');
  }
  return result;
}

exports.scrubFile = async function(filePath, engine) {
  const fileContent = fs.readFileSync(filePath);

  const output = await parseAndReplace(fileContent.toString(), engine);
  console.log(output.toString());
}
