# percipioSecretLoader
Loading secrets from Harness using you AWS profile (or using AWS role on a CI)

You can find the related confluence page here : https://skillsoftdev.atlassian.net/wiki/spaces/PSS/pages/3535470673/Percipio+Secret+Loader+-+How+to+use

## How to use this package
From an other project
- `npm login --registry https://nexus.rocs.io:8081/repository/npm-skillsoft/` (provide "deployment" and it's related password)
- Make sure you have a .npmrc with `@skillsoft-security-chapter:registry=https://nexus.rocs.io:8081/repository/npm-skillsoft/` set
- `npm add @skillsoft-security-chapter/percipiosecretloader`
- `npm i`
- `npx psl render docs/.env.example1 --awsprofile develop`
- or `npx percipioSecretLoader render example2.yaml --awsprofile develop`

From this repository:
- `./src/psl.js render docs/.env.example1 --awsprofile develop`
- `./src/psl.js render docs/example2.yaml --awsprofile develop`
- `./src/psl.js render docs/example3.template.config.js --awsprofile develop`
- `./src/psl.js render docs/.env.example1 --awsprofile psl`
- `./src/psl.js scrub docs/.env.example1`

## How to test this package
- Create a directory in your localmachine
- In this directory, run `npm link path/to/this/percipioSecretLoader`
- then `psl render file.template --awsprofile develop`

## How to publish?
- `npm login --registry https://nexus.rocs.io:8081/repository/npm-skillsoft/` (provide "deployment" and it's related password)
- `npm publish --registry https://nexus.rocs.io:8081/repository/npm-skillsoft/`


## Example documents
You can find template examples in this repository under the /docs folder.
